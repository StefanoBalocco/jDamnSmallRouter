"use strict";class t{static t;static i=window;static h=t.i.location;static o(){return void 0===t.t&&(t.t=new t),t.t}static u(t,e){const i=t=>{let e=[t];return t.includes(":AZ09")&&e.push(...i(t.replace(/:AZ09/,":AZ")),...i(t.replace(/:AZ09/,":09"))),e},r=new Set(i(t));return[...i(e)].some((t=>r.has(t)))}l=/\/(:\w+)\[(?:09|AZ)]\/(?:.+\/)?(\1)(?:\[(?:09|AZ)]|\/|$)/;A=/(?<=^|\/):(\w+)(?:\[(09|AZ)])?(?=\/|$)/g;p=[];Z=[];_=!1;R=[];constructor(){t.i.addEventListener("hashchange",this.CheckHash.bind(this))}S(){return t.h.hash.substring(1)}RouteSpecialAdd(t,e){let i=!1;if(![403,404,500].includes(t))throw new RangeError;return this.Z[t]=e,i=!0,i}RouteAdd(e,i,r,a){let s=!1;if(e.match(this.l))throw new SyntaxError("Duplicate path id");{const n=new RegExp("^"+e.replaceAll(this.A,((t,e,i)=>`(?<${e}>[${{"09":"\\d",AZ:"a-zA-Z",AZ09:"a-zA-Z\\d"}[i]??"a-zA-Z\\d"}]+)`)).replace(/\//g,"\\/")+"$"),h=e.replaceAll(this.A,((t,e,i)=>`:${i??"AZ09"}`)),o=e.split("/"),c=o.length;let u=0;for(let t=0;t<c;t++)o[t].startsWith(":")||(u+=2**(c-t-1));this.p.find((e=>t.u(h,e.path)))||(this.p.push({path:h,match:n,weight:u,routeFunction:i,available:r,routeFunction403:a}),this.p.sort(((t,e)=>e.weight-t.weight)),s=!0)}return s}RouteDel(e){let i=!1;if(e.match(this.l))throw new SyntaxError("Duplicate path id");{const r=e.replaceAll(this.A,((t,e,i)=>`:${i??"AZ09"}`)),a=this.p.findIndex((e=>t.u(r,e.path)));if(!(-1<a))throw new Error("Duplicated path");this.p.splice(a,1),i=!0}return i}async Trigger(e){return void 0!==e&&this.S()!==e&&(t.h.hash="#"+e),await this.CheckHash()}async Route(t){let e=!1;if(this.R.push(t),!this._){for(e=!0,this._=!0;t=this.R.shift();){let e,i,r={};const a=this.p.find((e=>!!e.match.exec(t)));if(a){r=a.match.exec(t).groups??{},e=a.path,i=!a.available||"function"==typeof a.available&&await a.available(e,t,r)?a.routeFunction:a.routeFunction403??this.Z[403],"function"!=typeof i&&(i=this.Z[500])}else i=this.Z[404];"function"==typeof i&&await i(e,t,r)}this._=!1}return e}async CheckHash(){const t=this.S();return!!t&&await this.Route(t)}}export default t.o;