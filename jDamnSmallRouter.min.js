"use strict";class t{static t;static i(){return void 0===t.t&&(t.t=new t),t.t}o=new RegExp(/\/(:\w+)\[(?:09|AZ)]\/(?:.+\/)?(\1)(?:\[(?:09|AZ)]|\/|$)/g);h=new RegExp(/(?<=^|\/):(\w+)(?:\[(09|AZ)])?(?=\/|$)/g);u=[];l=void 0;p=void 0;A=!1;R=[];constructor(){window.addEventListener("hashchange",this.CheckHash.bind(this))}RouteSpecialAdd(t,e){let i=!1;switch(t){case 403:this.l=e,i=!0;break;case 404:this.p=e,i=!0;break;default:throw new RangeError}return i}RouteAdd(t,e,i,n){let s=!1;if(t.match(this.o))throw new SyntaxError("Duplicate path id");{let a=0;const o=t.split("/"),r=o.length;for(let t=0;t<r;t++)o[t].startsWith(":")||(a+=2**(r-t-1));let h=new RegExp("^"+t.replace(this.h,(function(t,e,i){let n="(?<"+e+">[";switch(i){case"09":n+="\\d";break;case"AZ":n+="a-zA-Z";break;default:n+="\\w"}return n+="]+)",n})).replace(/\//g,"\\/")+"$");const c=t.replace(this.h,":$2");this.u.find((t=>c==t.path))||(this.u.push({path:c,match:h,weight:a,routeFunction:e,available:i,routeFunction403:n}),this.u.sort(((t,e)=>t.weight>e.weight?-1:e.weight>t.weight?1:0)),s=!0)}return s}RouteDel(t){let e=!1;if(t.match(this.o))throw new SyntaxError("Duplicate path id");{const i=t.replace(this.h,":$2"),n=this.u.findIndex((t=>i==t.path));-1<n&&(this.u.splice(n,1),e=!0)}return e}Trigger(t){"#"+t!=window.location.hash&&(window.location.hash="#"+t)}async Route(t){let e;this.A=!0;let i="",n=null;for(const s of this.u)if(n=s.match.exec(t)){i=s.path;let a=!0;s.available&&(a=!1,"function"==typeof s.available&&(a="AsyncFunction"===s.available.constructor.name?await s.available(i,t,n.groups??{}):s.available(i,t,n.groups??{}))),a?e=s.routeFunction:s.routeFunction403?e=s.routeFunction403:this.l&&(e=this.l);break}e&&"function"==typeof e||this.p&&(e=this.p),e&&"function"==typeof e&&("AsyncFunction"===e.constructor.name?await e(i,t,n?.groups??{}):e(i,t,n?.groups??{})),this.R.length?await this.Route(this.R.shift()):this.A=!1}async CheckHash(){let t=window.location.hash.startsWith("#")?window.location.hash.substring(1):"";""!=t&&(this.A?this.R.push(t):await this.Route(t))}}export default t.i;